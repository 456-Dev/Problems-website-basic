"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[148],{9148:(t,e,r)=>{r.d(e,{fetchLatestShorts:()=>o});var a=r(5125),n=r(5704);let i=n.env.YOUTUBE_API_KEY||n.env.NEXT_PUBLIC_YOUTUBE_API_KEY,s=n.env.YOUTUBE_CHANNEL_ID||n.env.NEXT_PUBLIC_YOUTUBE_CHANNEL_ID;async function o(){if(!i||!s)throw console.error("Missing YouTube API credentials"),Error("YouTube API credentials not configured");try{let t=await l(s),e=((await a.A.get("https://www.googleapis.com/youtube/v3/playlistItems",{params:{part:"snippet,contentDetails",playlistId:"UU".concat(t.substring(2)),maxResults:50,key:i}})).data.items||[]).map(t=>t.contentDetails.videoId).join(",");if(!e)return[];return((await a.A.get("https://www.googleapis.com/youtube/v3/videos",{params:{part:"contentDetails,snippet",id:e,key:i}})).data.items||[]).filter(t=>180>=function(t){let e=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!e)return 0;let r=parseInt(e[1]||"0"),a=parseInt(e[2]||"0");return 3600*r+60*a+parseInt(e[3]||"0")}(t.contentDetails.duration)).map(t=>{var e,r;return{id:t.id,title:t.snippet.title,description:t.snippet.description,thumbnail:(null==(e=t.snippet.thumbnails.high)?void 0:e.url)||(null==(r=t.snippet.thumbnails.medium)?void 0:r.url),publishedAt:t.snippet.publishedAt,url:"https://www.youtube.com/shorts/".concat(t.id)}})}catch(t){throw console.error("Error fetching YouTube Shorts:",t),t}}async function l(t){if(t.startsWith("UC")&&24===t.length)return t;if(t.startsWith("@"))try{let e=await a.A.get("https://www.googleapis.com/youtube/v3/channels",{params:{part:"id",forHandle:t,key:i}});if(e.data.items&&e.data.items.length>0)return e.data.items[0].id}catch(t){console.error("Error looking up channel by handle:",t)}try{let e=await a.A.get("https://www.googleapis.com/youtube/v3/channels",{params:{part:"id",forUsername:t.replace("@",""),key:i}});if(e.data.items&&e.data.items.length>0)return e.data.items[0].id}catch(t){console.error("Error looking up channel by username:",t)}throw Error("Could not find channel ID for: ".concat(t))}}}]);